[pytest]
# PyTest configuration for LionAGI concurrency testing

# Default options
addopts = -q -ra --strict-config --strict-markers --tb=short

# Test markers for selective execution
markers =
    anyio: run with pytest-anyio (backend-parametrized)
    regression: critical regression prevention tests (run on every commit)
    performance: performance benchmarks (run in dedicated CI stage)
    migration: legacy compatibility validation tests
    hypothesis: property-based tests (run nightly or extended CI)
    slow: long-running tests for nightly CI
    mem: memory profiling and leak detection tests
    benchmark: pytest-benchmark performance tests

# Timeout settings to prevent hangs
timeout = 15
timeout_method = thread

# Warning filters
filterwarnings =
    error::DeprecationWarning
    ignore:.*Use.*lionagi\.ln\..*instead.*function signature has changed.*:DeprecationWarning
    ignore:.*trio.*:DeprecationWarning
    ignore:.*ssl.*:DeprecationWarning
    ignore:.*Support for class-based.*config.*deprecated.*:pydantic.warnings.PydanticDeprecatedSince20

# Test discovery
testpaths = tests
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Minimum Python version
minversion = 3.10

# Backend parametrization handled in conftest.py via pytest_generate_tests